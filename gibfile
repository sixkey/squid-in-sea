# set cpp /home/sixkey/git/llvm-project/build/bin/clang++
# set cpp /usr/bin/clang++-12
set cpp /usr/bin/g++-9
set wrapcc      /home/sixkey/apps/gib/_build/gib.wrapcc
set findsrc     /home/sixkey/apps/gib/_build/gib.findsrc
set nochange    /home/sixkey/apps/gib/_build/gib.nochange
set mkdir /bin/mkdir
set ld /bin/ld

out manifest.txt
cmd $(findsrc) $(srcdir) manifest.txt

src src_files src_dirs manifest.txt

out dirs 
dep manifest.txt
cmd $(nochange) $(mkdir) -p tmp $(src_dirs)

set all

for file $(src_files:src/*.cpp:$1)
out $(file).o
dep src/$(file).cpp
cmd $(wrapcc) $(cpp) --std=c++17 -g -c -o $(out) $(srcdir)/$(dep)

out main
dep $(src_files:src/*.cpp:$1).o
cmd $(cpp) --std=c++17 -o squid $(dep)

add all main
